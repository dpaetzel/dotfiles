# -*- mode: conf; -*-


[general]
ui = ttyui

accounts = main
# maxsyncaccounts = 2 # ?

pythonfile = ~/.offlineimap/helpers.py


[mbnames]
enabled = yes
filename = ~/.mutt/mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"


[Account main]
localrepository = main-local
remoterepository = main-remote

# autorefresh = 10 # we do NOT want offlineimap to keep running!
# quick = 5

# postsynchook = notmuch new # I do this in the wrapper script instead


[Repository main-remote]
type = Gmail

remoteuser = david.a.paetzel@gmail.com
oauth2_client_id_eval = client_id("main")
oauth2_client_secret_eval = client_secret("main")
oauth2_refresh_token_eval = refresh_token("main")

maxconnections = 1

# DO delete messages on the server?
readonly = no
# synclabels = true # unneeded since only syncing All Mail and labelling locally
# keep deleted emails in gmail's All Mail
realdelete = yes

nametrans = gmail_remote_nt

# keep connection alive and watch inbox folder # not possible as we don't download INBOX
# keepalive = 60
# idlefolders = ['INBOX']
# holdconnectionopen = yes

# # use ssl
ssl = true
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
# folderfilter = lambda foldername: foldername in [ '[Gmail]/All Mail'
#                                                 , '[Gmail]/Drafts'
#                                                 , '[Gmail]/Sent Mail'
#                                                 , '[Gmail]/Spam'
#                                                 , '[Gmail]/Trash' ]
folderfilter = exclude([ '[Gmail]/Important'
                       , '[Gmail]/All Mail'
                       , '[Gmail]/Starred'
                       , 'Priority'
                       ])


[Repository main-local]
type = Maildir
localfolders = ~/Mail/main
sep = /
nametrans = gmail_local_nt


# sync sent mails from old account (I used it onceâ€¦)
[Account old]
localrepository = old-local
remoterepository = old-remote


[Repository old-remote]
type = Gmail

remoteuser = david.and.hoffmann@gmail.com
oauth2_client_id = 600521279279-gk76juntegtj2gvonq0turb7qdvlvfmk.apps.googleusercontent.com
oauth2_client_secret = fgWDQl-L4tf6PFo1bnWAivgB
oauth2_refresh_token = 1/4c-6G8Bz_IM0vkFSdsiYBUH3WHxtQ6RkinfpamBj3PQ

maxconnections = 1

# DO delete messages on the server?
readonly = yes
# synclabels = true # unneeded since only syncing All Mail and labelling locally
# keep deleted emails in gmail's All Mail
# realdelete = yes

nametrans = gmail_remote_nt

# keep connection alive and watch inbox folder # not possible as we don't download INBOX
# keepalive = 60
# idlefolders = ['INBOX']
# holdconnectionopen = yes

# use ssl
ssl = true
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
folderfilter = lambda foldername: foldername in [ '[Gmail]/Sent Mail' ]


[Repository old-local]
type = Maildir
localfolders = ~/Mail/old
sep = /
nametrans = gmail_local_nt